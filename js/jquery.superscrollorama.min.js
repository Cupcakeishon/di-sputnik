(function($){$.superscrollorama=function(options){var superscrollorama=this;var defaults={isVertical:true};superscrollorama.settings=$.extend({},defaults,options);var animObjects=[],pinnedObjects=[],didScrollCheck=false,timeline=new TimelineLite;function init(){$("html, body").animate({scrollTop:0},0);$(window).scroll(function(){didScrollCheck=true});setInterval(function(){if(didScrollCheck){checkScrollAnim();didScrollCheck=false}},50)}function checkScrollAnim(){var currScrollPoint=superscrollorama.settings.isVertical?
$(window).scrollTop():$(window).scrollLeft();var offsetAdjust=superscrollorama.settings.isVertical?-$(window).height()/2:-$(window).width()/2;var i,startPoint,endPoint;var numAnim=animObjects.length;for(i=0;i<numAnim;i++){var animObj=animObjects[i],target=animObj.target,offset=animObj.offset;if(typeof target==="string"){startPoint=superscrollorama.settings.isVertical?$(target).offset().top:$(target).offset().left;offset+=offsetAdjust}else if(typeof target==="number")startPoint=target;else{startPoint=
superscrollorama.settings.isVertical?target.offset().top:target.offset().left;offset+=offsetAdjust}startPoint+=offset;endPoint=animObj.dur?startPoint+animObj.dur:startPoint;if(currScrollPoint>startPoint&&currScrollPoint<endPoint&&animObj.state!=="TWEENING"){animObj.state="TWEENING";animObj.start=startPoint;animObj.end=endPoint;animObj.tween.progress((currScrollPoint-animObj.start)/(animObj.end-animObj.start)).pause()}else if(currScrollPoint<startPoint&&animObj.state!=="BEFORE"){animObj.tween.reverse();
animObj.state="BEFORE"}else if(currScrollPoint>endPoint&&animObj.state!=="AFTER"){animObj.tween.play();animObj.state="AFTER"}else if(animObj.state==="TWEENING")animObj.tween.progress((currScrollPoint-animObj.start)/(animObj.end-animObj.start)).pause()}var numPinned=pinnedObjects.length;for(i=0;i<numPinned;i++){var pinObj=pinnedObjects[i];var el=pinObj.el;if(pinObj.state!="PINNED"){startPoint=pinObj.spacer?superscrollorama.settings.isVertical?pinObj.spacer.offset().top:pinObj.spacer.offset().left:
superscrollorama.settings.isVertical?el.offset().top:el.offset().left;startPoint+=pinObj.offset;endPoint=startPoint+pinObj.dur;if(currScrollPoint>startPoint&&currScrollPoint<endPoint&&pinObj.state!=="PINNED"){pinObj.state="PINNED";pinObj.origPositionVal=superscrollorama.settings.isVertical?el.css("top"):el.css("left");if(pinObj.origPositionVal==="auto")pinObj.origPositionVal=0;else pinObj.origPositionVal=parseInt(pinObj.origPositionVal,10);el.css("position","fixed");if(superscrollorama.settings.isVertical)el.css("top",
0);else el.css("left",0);pinObj.pinStart=startPoint;pinObj.pinEnd=endPoint;if(pinObj.spacer)pinObj.spacer.css("height",pinObj.dur+el.outerHeight());if(pinObj.onPin)pinObj.onPin()}}else if(currScrollPoint<pinObj.pinStart||currScrollPoint>pinObj.pinEnd){pinObj.state=currScrollPoint<pinObj.pinStart?"BEFORE":"AFTER";el.css("position",pinObj.origPosition);if(superscrollorama.settings.isVertical)el.css("top",pinObj.origPositionVal);else el.css("left",pinObj.origPositionVal);if(pinObj.spacer)pinObj.spacer.css("height",
currScrollPoint<pinObj.pinStart?0:pinObj.dur);if(pinObj.onUnpin)pinObj.onUnpin()}else if(pinObj.anim)pinObj.anim.progress((currScrollPoint-pinObj.pinStart)/(pinObj.pinEnd-pinObj.pinStart))}}superscrollorama.addTween=function(target,tween,dur,offset){tween.pause();animObjects.push({target:target,tween:tween,offset:offset||0,dur:dur||0,state:"BEFORE"})};superscrollorama.pin=function(el,dur,vars){if(typeof el==="string")el=$(el);if(vars.anim)vars.anim.pause();var pinSpacer=null;if(el.css("position")===
"relative"||el.css("position")==="static"){pinSpacer=$('<div class="pin-spacer"></div>');el.before(pinSpacer)}pinnedObjects.push({el:el,state:"BEFORE",dur:dur,offset:vars.offset||0,anim:vars.anim,origPosition:el.css("position"),spacer:pinSpacer,onPin:vars.onPin,onUnpin:vars.onUnpin})};init();return superscrollorama}})(jQuery);
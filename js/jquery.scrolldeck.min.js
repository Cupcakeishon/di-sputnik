(function($){$.scrolldeck=function(options){var currIndex=0,buttons,slides,scrollpoints=[],sections=[],windowHeight=$(window).height(),i;var defaults={buttons:".nav-button",slides:".section",duration:600,easing:"easeInOutExpo",offset:0};var scrolldeck=this;scrolldeck.settings={};var init=function(){scrolldeck.settings=$.extend({},defaults,options);buttons=$(scrolldeck.settings.buttons);slides=$(scrolldeck.settings.slides);scrolldeck.controller=$.scrollorama({blocks:slides,offset:scrolldeck.settings.offset});
var anim;for(i=0;i<$(".animate-in").length;i++){anim=$(".animate-in").eq(i);switch(anim.attr("data-animation")){case "fly-in-left":anim.parent().css("overflow","hidden");scrolldeck.controller.animate(anim,{delay:windowHeight/2,duration:windowHeight/2,property:"left",start:-1200});break;case "fly-in-right":anim.parent().css("overflow","hidden");scrolldeck.controller.animate(anim,{delay:windowHeight/2,duration:windowHeight/2,property:"right",start:-1200});break;case "space-in":scrolldeck.controller.animate(anim,
{delay:windowHeight*0.8,duration:windowHeight*0.2,property:"letter-spacing",start:40});scrolldeck.controller.animate(anim,{delay:windowHeight*0.8,duration:windowHeight*0.2,property:"opacity",start:0});break;case "fade-in":scrolldeck.controller.animate(anim,{delay:windowHeight/2,duration:windowHeight/2,property:"opacity",start:0});break;default:scrolldeck.controller.animate(anim,{delay:windowHeight/2,duration:windowHeight/2,property:"opacity",start:0})}}for(i=0;i<$(".animate-build").length;i++){anim=
$(".animate-build").eq(i);switch(anim.attr("data-animation")){case "fly-in-left":anim.parent().css("overflow","hidden");scrolldeck.controller.animate(anim,{delay:(anim.attr("data-build")-1)*400,duration:400,property:"left",start:-1200,pin:true});break;case "fly-in-right":anim.parent().css("overflow","hidden");scrolldeck.controller.animate(anim,{delay:(anim.attr("data-build")-1)*400,duration:400,property:"right",start:-1200,pin:true});break;case "space-in":scrolldeck.controller.animate(anim,{delay:(anim.attr("data-build")-
1)*400,duration:400,property:"letter-spacing",start:40,pin:true});scrolldeck.controller.animate(anim,{delay:(anim.attr("data-build")-1)*400,duration:400,property:"opacity",start:0,pin:true});break;case "fade-in":scrolldeck.controller.animate(anim,{delay:(anim.attr("data-build")-1)*400,duration:400,property:"opacity",start:0,pin:true});break;default:scrolldeck.controller.animate(anim,{delay:(anim.attr("data-build")-1)*400,duration:400,property:"opacity",start:0,pin:true})}}scrollpoints=scrolldeck.controller.getScrollpoints();
for(i=0;i<buttons.length;i++)sections.push(slides.index($($(buttons[i]).attr("href"))));scrolldeck.controller.onBlockChange(function(){currIndex=scrolldeck.controller.blockIndex;updateNav()});buttons.click(function(e){e.preventDefault();var slide=$($(this).attr("href"));currIndex=slide.index();scrollToSlide(slide)});$(document).keydown(function(e){if((e.keyCode==37||e.keyCode==38)&&currIndex!==0)scrollToSlide(getPrevScrollpoint());else if((e.keyCode==39||e.keyCode==32||e.keyCode==40)&&currIndex!=
slides.length-1)scrollToSlide(getNextScrollpoint())});for(i=0;i<slides.length;i++){var el=slides.eq(i);if(el.prop("tagName").toUpperCase()==="IMG")el.css("height","auto")}var lastSlide=slides.eq(slides.length-1);if(lastSlide.outerHeight()<$(window).height())lastSlide.height(lastSlide.height()+$(window).height()-lastSlide.outerHeight());updateNav()};function updateNav(){if(buttons){buttons.removeClass("current");var currSection=-1;for(i=0;i<sections.length;i++)if(currIndex>=sections[i])currSection=
i;if(currSection!=-1)buttons.eq(currSection).addClass("current")}}function scrollToSlide(slide){$(window)._scrollable().stop();$(window).scrollTo(slide,{duration:scrolldeck.settings.duration,easing:scrolldeck.settings.easing,offset:scrolldeck.settings.offset})}function getNextScrollpoint(){return getScrollpoint(2)}function getPrevScrollpoint(){return getScrollpoint(-1)}function getScrollpoint(n){var scrollTop=$(window).scrollTop();var points=scrollpoints.slice(0);points.push(scrollTop);points.sort(function(a,
b){return a-b});return points[points.indexOf(scrollTop)+n]}init()}})(jQuery);